{% comment %}
Urgency Timer - Product Page Block

Renders a countdown/fixed timer for the current product by mounting a client script
and fetching published timers from the app proxy endpoint (secured with HMAC).

Notes:
- Include assets/urgency-timer.js and assets/urgency-timer.css in your extension assets.
- Default endpoint: /apps/urgency-timer/timers (Shopify App Proxy - automatically signed)
- View tracking endpoint: /public/views (public endpoint for analytics)
- You can override endpoints by defining window.URGENCY_TIMER_ENDPOINT and
  window.URGENCY_TIMER_VIEW_ENDPOINT before the script loads.
- This block exposes data attributes (shop domain, product ID, timer ID) used by the client script.
{% endcomment %}


<link rel="stylesheet" href="{{ 'urgency-timer.css' | asset_url }}" media="all">

<div
  id="urgency-timer-product-root"
  class="urgency-timer-root urgency-timer-product"
  data-shop-domain="{{ shop.permanent_domain }}"
  data-product-id="{{ product.id }}"
  data-product-handle="{{ product.handle }}"
  data-timer-id="{{ section.settings.timerId }}"
>
  <!-- Client script mounts the timer UI here -->
  <noscript>
    <style>
      .urgency-timer-root { display: none; }
    </style>
  </noscript>
</div>

<script src="{{ 'urgency-timer.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Urgency Timer",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "timerId",
      "label": "Timer ID"
    }
  ]
}
{% endschema %}
