{% comment %}
Urgency Timer - Top/Bottom Bar Block

Renders a fixed top or bottom bar timer that displays across all pages (or selected pages).
The bar is mounted globally by the JavaScript client script and can be dismissed by visitors.

Configuration:
- positioning: "top" or "bottom" - where the bar should appear
- timerId: specific timer ID to display (optional - if not set, script will auto-select)

Notes:
- Include assets/urgency-timer.js and assets/urgency-timer.css in your extension assets.
- The bar timer is rendered outside the normal page flow using position: fixed
- Visitors can dismiss the bar, and it won't reappear until page reload (localStorage based)
- Default endpoint: /apps/urgency-timer/timers (Shopify App Proxy - automatically signed)
- View tracking endpoint: /public/views (public endpoint for analytics)
{% endcomment %}

<link rel="stylesheet" href="{{ 'urgency-timer.css' | asset_url }}" media="all">

<div
  id="urgency-timer-bar-root"
  class="urgency-timer-root urgency-timer-bar-root"
  data-shop-domain="{{ shop.permanent_domain }}"
  data-timer-type="bar"
  data-positioning="{{ block.settings.positioning }}"
  data-timer-id="{{ block.settings.timerId }}"
  style="display: none;"
>
  <!-- Client script mounts the bar timer here -->
  <noscript>
    <style>
      .urgency-timer-bar-root { display: none !important; }
    </style>
  </noscript>
</div>

<script src="{{ 'urgency-timer.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Urgency Timer Bar",
  "target": "section",
  "settings": [
    {
      "type": "select",
      "id": "positioning",
      "label": "Bar Position",
      "options": [
        {
          "value": "top",
          "label": "Top of page"
        },
        {
          "value": "bottom",
          "label": "Bottom of page"
        }
      ],
      "default": "top"
    },
    {
      "type": "text",
      "id": "timerId",
      "label": "Timer ID (Optional)",
      "info": "Leave empty to auto-select the first matching bar timer. Enter a specific timer ID to display that timer only."
    }
  ]
}
{% endschema %}
